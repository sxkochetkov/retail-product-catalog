{"ast":null,"code":"import _objectSpread from\"C:/space/java/retail-product-catalog/src/main/product-catalog-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useEffect,useRef,useState}from'react';import'react-toastify/dist/ReactToastify.css';import{Routes,Route,Navigate}from'react-router-dom';import Header from'./components/Header';import ProductList from'./components/ProductList';import{getProducts,addProduct,prepopulate}from'./api/ProductService';import{toastError}from'./api/ToastService';import{ToastContainer}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const modalRef=useRef();const[data,setData]=useState({});const[currentPage,setCurrentPage]=useState(0);const[values,setValues]=useState({name:'',category:'',description:'',price:'',imageUrl:''});const getAllProducts=async function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;try{setCurrentPage(page);const{data}=await getProducts(page,size);setData(data);console.log(\"data retrieved:\"+data.length);console.log(data);}catch(error){console.log(error);}};const onChange=event=>{setValues(_objectSpread(_objectSpread({},values),{},{[event.target.name]:event.target.value}));};const handleNewProduct=async event=>{event.preventDefault();try{const{data}=await addProduct(values);toggleModal(false);setValues({name:'',category:'',description:'',price:'',imageUrl:''});getAllProducts();}catch(error){console.log(error);toastError(error.message);}};useEffect(()=>{getAllProducts();},[]);const toggleModal=show=>show?modalRef.current.showModal():modalRef.current.close();//console.log(\"data length  is : \" + data?.length);\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{toggleModal:toggleModal,numberOfProducts:data.length}),/*#__PURE__*/_jsx(\"main\",{className:\"main\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(Routes,{children:/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(ProductList,{data:data,currentPage:currentPage,getAllProducts:getAllProducts,prepopulate:prepopulate})})})})}),/*#__PURE__*/_jsxs(\"dialog\",{ref:modalRef,className:\"modal\",id:\"modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal__header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"New Product\"}),/*#__PURE__*/_jsx(\"i\",{onClick:()=>toggleModal(false),className:\"bi bi-x-lg\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"divider\"}),/*#__PURE__*/_jsx(\"div\",{className:\"modal__body\",children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleNewProduct,children:/*#__PURE__*/_jsxs(\"div\",{className:\"product-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"details\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:values.name,onChange:onChange,name:\"name\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"details\",children:\"Category\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:values.category,onChange:onChange,name:\"category\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"details\",children:\"Description\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:values.description,onChange:onChange,name:\"description\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"details\",children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:values.price,onChange:onChange,name:\"price\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"details\",children:\"Url\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:values.imageUrl,onChange:onChange,name:\"imageUrl\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_footer\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleModal(false),type:\"button\",className:\"btn btn-danger\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn\",children:\"Save\"})]})]})})})]}),/*#__PURE__*/_jsx(ToastContainer,{})]});}export default App;","map":{"version":3,"names":["useEffect","useRef","useState","Routes","Route","Navigate","Header","ProductList","getProducts","addProduct","prepopulate","toastError","ToastContainer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","modalRef","data","setData","currentPage","setCurrentPage","values","setValues","name","category","description","price","imageUrl","getAllProducts","page","arguments","length","undefined","size","console","log","error","onChange","event","_objectSpread","target","value","handleNewProduct","preventDefault","toggleModal","message","show","current","showModal","close","children","numberOfProducts","className","path","element","ref","id","onClick","onSubmit","type","required"],"sources":["C:/space/java/retail-product-catalog/src/main/product-catalog-frontend/src/App.js"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { Routes, Route, Navigate } from 'react-router-dom';\nimport Header from './components/Header'\nimport ProductList from './components/ProductList'\nimport { getProducts, addProduct, prepopulate} from './api/ProductService';\nimport { toastError } from './api/ToastService';\nimport { ToastContainer } from 'react-toastify';\n\nfunction App() {\n     const modalRef = useRef();\n     const [data, setData] = useState({});\n     const [currentPage, setCurrentPage] = useState(0);\n     const [values, setValues] = useState({\n         name: '',\n         category: '',\n         description: '',\n         price: '',\n         imageUrl: ''\n     });\n\n     const getAllProducts = async (page = 0, size = 2) => {\n        try {\n          setCurrentPage(page);\n          const { data } = await getProducts(page, size);\n          setData(data);\n          console.log(\"data retrieved:\" + data.length);\n          console.log(data);\n        } catch(error) {\n          console.log(error);\n        }\n     }\n\n     const onChange = (event) => {\n      setValues({ ...values, [event.target.name]: event.target.value });\n    };\n\n     const handleNewProduct = async (event) => {\n          event.preventDefault();\n          try {\n                const { data } = await addProduct(values);\n                toggleModal(false);\n                setValues({\n                  name: '',\n                  category: '',\n                  description: '',\n                  price: '',\n                  imageUrl: ''\n                })\n                getAllProducts();\n          } catch (error) {\n                console.log(error);\n                toastError(error.message);\n          }\n    };\n\n  useEffect(() => {\n    getAllProducts();\n  }, []);\n\n  const toggleModal = show => show ? modalRef.current.showModal() : modalRef.current.close();\n  //console.log(\"data length  is : \" + data?.length);\n\n  return (\n    <>\n      <Header toggleModal={toggleModal}  numberOfProducts={data.length} />\n      <main className='main'>\n        <div className='container'>\n          <Routes>\n            <Route path=\"/\" element={<ProductList data={data} currentPage={currentPage} getAllProducts={getAllProducts} prepopulate={prepopulate} />} />\n          </Routes>\n        </div>\n      </main>\n\n      {/* Modal */}\n      <dialog ref={modalRef} className=\"modal\" id=\"modal\">\n        <div className=\"modal__header\">\n          <h3>New Product</h3>\n          <i onClick={() => toggleModal(false)} className=\"bi bi-x-lg\"></i>\n        </div>\n        <div className=\"divider\"></div>\n        <div className=\"modal__body\">\n          <form onSubmit={handleNewProduct}>\n            <div className=\"product-details\">\n              <div className=\"input-box\">\n                <span className=\"details\">Name</span>\n                <input type=\"text\" value={values.name} onChange={onChange} name='name' required />\n              </div>\n              <div className=\"input-box\">\n                 <span className=\"details\">Category</span>\n                 <input type=\"text\" value={values.category} onChange={onChange} name='category' required />\n              </div>\n              <div className=\"input-box\">\n                <span className=\"details\">Description</span>\n                <input type=\"text\" value={values.description} onChange={onChange} name='description' required />\n              </div>\n              <div className=\"input-box\">\n                 <span className=\"details\">Price</span>\n                 <input type=\"text\" value={values.price} onChange={onChange} name='price' required />\n              </div>\n              <div className=\"input-box\">\n                <span className=\"details\">Url</span>\n                <input type=\"text\" value={values.imageUrl} onChange={onChange} name='imageUrl' required />\n              </div>\n            <div className=\"form_footer\">\n              <button onClick={() => toggleModal(false)} type='button' className=\"btn btn-danger\">Cancel</button>\n              <button type='submit' className=\"btn\">Save</button>\n            </div>\n           </div>\n          </form>\n        </div>\n      </dialog>\n      <ToastContainer />\n      </>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}